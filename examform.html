<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Exam Portal</title>
</head>
<style>
    body {
        background-color: #FFE6DE;
    }

    #div1 {
        display: flex;
        justify-content: center;

    }

    .count {
        background-color: white;
        border: 1px solid;
        border-color: black;
        height: 255px;
        width: 420px;
        display: flex;
        /* margin-top: 140px; */
        justify-content: center;
        align-items: center;
    }

    #frame {

        border: 1px solid;
        border-color: black;
        height: 540px;
        width: 917px;
        margin-top: -510px;
        margin-left: 430px;
    }


    .container {
        display: flex;
        justify-content: center;
    }
</style>

<body>
    <div id="div1" class="container">
        <h1>Government Polytechnic ,Solapur<h1>
    </div>

    <div class="row">
        <div class="col-4 flex-column">

            <div class="count fw-bold">
                <h3 id="countdown"></h3>
            </div>

            <div>
                <video src="" alt="Camera is on "></video>
            </div>

        </div>



    </div>

    <script>


        //JS coding for Camera Don't do any shit here! 
        var camera = false;
        var video = document.querySelector('video');
        var constraints = { video: { facingMode: (camera ? "user" : "environment"), width: 420, height: 255 } };
        navigator.mediaDevices.getUserMedia(constraints)
            .then(function (mediaStream) {
                video.srcObject = mediaStream;
                video.onloadedmetadata = function (e) {
                    video.play();
                };
            })

            //JS Code for Ctrl and Alt Restrcition 
            .catch(function (err) { console.log(err.name + ": " + err.message); })
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });
        document.onkeydown = function (e) {
            if (event.keyCode == 123) {
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'i'.charCodeAt(0)) {
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) {
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'O'.charCodeAt(0)) {
                return false;
            }
            if (e.shiftKey && e.tabKey) {
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'I'.charCodeAt(0)) {
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'A'.charCodeAt(0)) {
                return false;
            }
        }


        //JS coding for Timmer 
        function countdown(elementName, minutes, seconds) {
            var element, endTime, hours, mins, msLeft, time;

            function twoDigits(n) {
                return (n <= 9 ? "0" + n : n);
            }

            function updateTimer() {
                msLeft = endTime - (+new Date);
                if (msLeft < 1000) {
                    element.innerHTML = "countdown's over!";
                    alert("Exam time over");
                    window.close();

                } else {
                    time = new Date(msLeft);
                    hours = time.getUTCHours();
                    mins = time.getUTCMinutes();
                    element.innerHTML = (hours ? hours + ':' + twoDigits(mins) : mins) + ':' + twoDigits(time.getUTCSeconds());
                    setTimeout(updateTimer, time.getUTCMilliseconds() + 500);
                }
            }

            element = document.getElementById(elementName);
            endTime = (+new Date) + 1000 * (60 * minutes + seconds) + 500;
            updateTimer();
        }

        countdown("countdown", 10, 30);

        //JS code For TabChange Restriction
        var t = 0
        document.addEventListener("visibilitychange", function () {
            console.log(document.visibilityState);
            if (document.visibilityState == "hidden") {
                t++;
                alert("You Changed Tab " + t + " time")
                document.visibilityState = "visible";

                if (t == 10) {
                    window.close();

                }



            }


            console.log(d)

        });


        var tabName = document.title;
        console.log(tabName)



        // popitup();
        // function popitup() {
        //     newwindow = window.open("../pages/form.html", "hello", 'height=2000,width=1500');
        //     if (window.focus) { newwindow.focus() }
        //     return false;
        // }
    </script>
</body>

</html>
